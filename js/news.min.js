var app = angular.module("newsword",[]);
app.directive("navWord",function() {
	return {
		restrict:"EACM",
		transclude:true,
		templateUrl:"../nav.html"
	}
}),
app.directive("footerWord",function() {
	return {
		restrict:"EACM",
		transclude:true,
		templateUrl:"../footer.html"
	}
}),


/* --------------------- 获取后台数据 --------------------- */
app.controller('newsBolg',function ($scope,$http) {
	$http({
		method:'GET',
		url:'../php/journalism.min.php',
	}).then(function (response) {
		//成功后的回调函数
		$scope.journalism = response.data;
		console.log(response.data);

		/* --------------------- 分页 --------------------- */
		$scope.getPages = function () {
			var pages = [];
			var count = $scope.journalism.length / 9;
			for (var i = 0; i < count; i++) {
				pages.push(i + 1);
			};
			$scope.myPages = pages;
		}
		/* ------------------------------------------------ */
	},function (error) {
		//失败后的回调函数
	})


});
// /* -------------------------------------------------------- */

// /* ----------------------- 过滤菜单 ----------------------- */
//过滤器filter  新模块
var myFilter = angular.module("filters",[]);
//自定义过滤器  filter('名称'，函数)
myFilter.filter("unique",function () {
//两个参数：要过滤的数据 过滤条件
	return function (journalism,property) {
		//判断过滤是否是数组 isArray()
		if (angular.isArray(journalism)) {
			var typeNames = [];
			var obj = {};
			for (var i = 0; i < journalism.length; i++){
				var type = journalism[i][property];
				if (angular.isUndefined(obj[type])){
					//将category push进去
					typeNames.push(type);
					obj[type] = true;
				}
			}	
			return typeNames;
		} else{
			return [];	
		}
	}
})

/* -------------------------------------------------------- */